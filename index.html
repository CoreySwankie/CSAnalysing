<!DOCTYPE html>
<html lang="en">
<head>
  <title>CS Analytics</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  <style>
    /* Set height of the grid so .sidenav can be 100% (adjust as needed) */
    .row.content {height: 550px}

    /* Set gray background color and 100% height */
    .sidenav {
      background-color: #f1f1f1;
      height: 100%;
    }

    /* On small screens, set height to 'auto' for the grid */
    @media screen and (max-width: 767px) {
      .row.content {height: auto;}
    }
  </style>
</head>
<body>
<nav class="navbar navbar-inverse visible-xs">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">CS Analytics</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">All JSON Info Output</a></li>
        <li><a href="#">Age</a></li>
        <li><a href="#">Gender</a></li>
        <li><a href="#">Geo</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container-fluid">
  <div class="row content">
    <div class="col-sm-3 sidenav hidden-xs">
      <h2>CS Analytics</h2>
      <ul class="nav nav-pills nav-stacked">
        <li class="active"><a href="#section1">All JSON Info Output</a></li>
        <li><a href="#section2">Age</a></li>
        <li><a href="#section3">Gender</a></li>
        <li><a href="#section3">Geo</a></li>
      </ul><br>
    </div>
    <br>

    <div class="col-sm-9">
        <div class="well">
            <h4>JSON File Paths</h4>
            <p id="JSONPaths"></p>

            <script type="text/javascript">
            // get the json paths
            $.ajax({
                url: 'getJSONFilePaths.php',
                success: function (response) {//response is value returned from php
                    document.getElementById("JSONPaths").innerHTML = response;
                }
            });
            </script>

            <p id="jsonDisplay"> </p>
            <script type="text/javascript">
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                      // do something here
                      var output = "<b>Data From path ./data/test.json </b> </br>"; // title the test data output
                      var data = JSON.parse(xhttp.responseText);
                      var dataKeys = [];

                      // get the different key names and store in array
                      Object.keys(data).forEach(SetupDataKeys);
                      function SetupDataKeys(item, index){
                        // add the key name to the key array
                        dataKeys.push(item);
                      }

                      // output the keys
                      dataKeys.forEach(FEDataKey);
                      function FEDataKey(item, index){
                        // output the key name
                        output += item;

                        if (Array.isArray(data[item])) {
                          output += " is an array";
                          // output the number of entries under that key
                          output += " and has " + data[item].length + " entries";

                          // now need to get all the entries of that key
                          // from there can then get that entries keys

                          // data[item].forEach(FEEntry);
                          // function FEEntry(item1,index1){
                          //   output += "</br>" + item1.RunTime;
                          // }
                        }

                        // new line for the next key name output
                        output += "</br>";
                      }




                      document.getElementById("jsonDisplay").innerHTML = output;
                    }

                  };

                  xhttp.open("GET", "./data/test.json", true);
                  xhttp.send();
            </script>


        </div>

      <div class="row">
        <div class="col-sm-9">
          <div class="well">
            <h4>All Data</h4>
            <p id="JSONDisplay"></p>

            <script type="text/javascript"> // script that returns all the data inside the json files
                $.ajax({
                    url: 'getData.php',
                    success: function (response) {//response is value returned from php
                        document.getElementById("JSONDisplay").innerHTML = response;
                    }
                });
            </script>

          </div>
        </div>
      </div>

      <div class = "row">
        <div class="col-sm-3">
          <div class="well">
            <h4>Pages</h4>
            <p>100 Million</p>
          </div>
        </div>
        <div class="col-sm-3">
          <div class="well">
            <h4>Sessions</h4>
            <p>10 Million</p>
          </div>
        </div>
        <div class="col-sm-3">
          <div class="well">
            <h4>Bounce</h4>
            <p>30%</p>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4">
          <div class="well">
            <p>Text</p>
            <p>Text</p>
            <p>Text</p>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="well">
            <p>Text</p>
            <p>Text</p>
            <p>Text</p>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="well">
            <p>Text</p>
            <p>Text</p>
            <p>Text</p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-8">
          <div class="well">
            <p>Text</p>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="well">
            <p>Text</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
